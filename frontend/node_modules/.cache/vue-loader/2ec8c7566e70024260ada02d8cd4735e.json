{"remainingRequest":"/home/kukkui/Desktop/fullstack-app/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kukkui/Desktop/fullstack-app/frontend/src/components/ProductList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kukkui/Desktop/fullstack-app/frontend/src/components/ProductList.vue","mtime":1617871465433},{"path":"/home/kukkui/Desktop/fullstack-app/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kukkui/Desktop/fullstack-app/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kukkui/Desktop/fullstack-app/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kukkui/Desktop/fullstack-app/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2R1Y3RMaXN0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXRlbXM6IFtdLAogICAgICByZXN1bHQ6IDAsCiAgICAgIHVzZXJJdGVtIDogW10sCiAgICAgIGRldmljZUxvY2F0aW9uOiAnQmFuZ2tvaywgSHVheWt3YW5nLCBSQU1BOSwgMTAzMTAnLAoKICAgIH07CiAgfSwKICBwcm9wczogWyd2YWx1ZSddLAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFByb2R1Y3RzKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8gR2V0IEFsbCBQcm9kdWN0cwogICAgYXN5bmMgZ2V0UHJvZHVjdHMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9wcm9kdWN0cyIpOwogICAgICAgIHRoaXMuaXRlbXMgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9LAoKICAgIC8vIERlbGV0ZSBQcm9kdWN0IGFmdGVyIHVzZXIgcGljayB1cAogICAgYXN5bmMgZGVsZXRlUHJvZHVjdChpZCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHRlbXAgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9wcm9kdWN0cy8ke2lkfWApOwogICAgICAgIGNvbnN0IHRlbXBQcmljZSA9IHRlbXAuZGF0YS5wcm9kdWN0X3ByaWNlOwogICAgICAgIGNvbnN0IHRlbXBOYW1lID0gdGVtcC5kYXRhLnByb2R1Y3RfbmFtZTsKICAgICAgICBjb25zdCB0ZW1wVW5pdCA9IHRlbXAuZGF0YS5wcm9kdWN0X3VuaXQ7CgogICAgICAgIC8vRU5PVUdIIEJBTEFOQ0UKICAgICAgICBpZih0aGlzLnJlc3VsdCA+PSB0ZW1wUHJpY2UpewogICAgICAgICAgLy9JVEVNIE9OTFkgMSBMRUZUCiAgICAgICAgICBpZih0ZW1wVW5pdD09MSl7CiAgICAgICAgICAgIHRoaXMucmVzdWx0LT10ZW1wUHJpY2U7Ly9ERURVQ1QgQkFMQU5DRQogICAgICAgICAgICBhd2FpdCBheGlvcy5kZWxldGUoYGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9wcm9kdWN0cy8ke2lkfWApOy8vREVMRVRFIExBU1QgSVRFTQogICAgICAgICAgICB0aGlzLnVzZXJJdGVtLnB1c2godGVtcE5hbWUpOy8vVVNFUiBHRVQgSVRFTQogICAgICAgICAgICBhbGVydCgnREVMRVRFIElURU0nKQogICAgICAgICAgfQogICAgICAgICAgLy9JVEVNIExFRlQgTEVTVCBUSEFOIDEwIEJVVCBHUkVBVEVSIFRIQU4gMQogICAgICAgICAgZWxzZSBpZih0ZW1wVW5pdCA9PSAxMCkgewogICAgICAgICAgICB0aGlzLnJlc3VsdCAtPSB0ZW1wUHJpY2U7Ly9ERURVQ1QgQkFMQU5DRQogICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoYGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9wcm9kdWN0cy8ke2lkfS8ke3RlbXBVbml0IC0gMX1gLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBwcm9kdWN0X25hbWU6IHRlbXBOYW1lLAogICAgICAgICAgICAgICAgICBwcm9kdWN0X3ByaWNlOiB0aGlzLnByb2R1Y3RQcmljZSwKICAgICAgICAgICAgICAgIH0pOy8vVVBEQVRFIE5FVyBVTklULTEgVE8gSVRFTQogICAgICAgICAgICB0aGlzLnVzZXJJdGVtLnB1c2godGVtcE5hbWUpLy9VU0VSIEdFVCBJVEVNCiAgICAgICAgICAgIGFsZXJ0KCdJVEVNIE5PVyBMRVNTIFRIQU4gMTAgVU5JVFMnKQogICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjUwMDAvcHJvZHVjdHMvZW1haWwvJHt0aGlzLmRldmljZUxvY2F0aW9ufWApOy8vRU1BSUwgQURNSU4KICAgICAgICAgICAgYWxlcnQoJ0VNQUlMIFdBUk5JTkcgU0VOVCcpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZXsKICAgICAgICAgICAgdGhpcy5yZXN1bHQtPXRlbXBQcmljZTsvL0RFRFVDVCBCQUxBTkNFCiAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChgaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Byb2R1Y3RzLyR7aWR9LyR7dGVtcFVuaXQtMX1gLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBwcm9kdWN0X25hbWU6IHRlbXBOYW1lLAogICAgICAgICAgICAgICAgICBwcm9kdWN0X3ByaWNlOiB0aGlzLnByb2R1Y3RQcmljZSwKICAgICAgICAgICAgICAgIH0pOy8vVVBEQVRFIE5FVyBVTklULTEgVE8gSVRFTQogICAgICAgICAgICB0aGlzLnVzZXJJdGVtLnB1c2godGVtcE5hbWUpLy9VU0VSIEdFVCBJVEVNCiAgICAgICAgICAgIGFsZXJ0KCdVU0VSIEdPVCBJVEVNJykKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy9OT1QgRU5PVUdIIEJBTEFOQ0UKICAgICAgICBlbHNlewogICAgICAgICAgYWxlcnQoYFlvdSBoYXZlICR7dGhpcy5yZXN1bHR9IGNvaW5zLCBCdXQgdGhlIHByaWNlIGlzICR7dGVtcFByaWNlfWApCiAgICAgICAgICBhbGVydCgnVFJZIElOU0VSVCBDT0lOUycpCiAgICAgICAgfQogICAgICAgIHRoaXMuZ2V0UHJvZHVjdHMoKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgfSwKCiAgICBlbWl0UmVzdWx0ICgpIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLnJlc3VsdCkKICAgIH0sCiAgICBhZGQxICgpIHsKICAgICAgdGhpcy5yZXN1bHQgKz0gMQogICAgICB0aGlzLmVtaXRSZXN1bHQoKQogICAgfSwKICAgIGFkZDUgKCkgewogICAgICB0aGlzLnJlc3VsdCArPSA1CiAgICAgIHRoaXMuZW1pdFJlc3VsdCgpCiAgICB9LAogICAgYWRkMTAgKCkgewogICAgICB0aGlzLnJlc3VsdCArPSAxMAogICAgICB0aGlzLmVtaXRSZXN1bHQoKQogICAgfSwKICAgIGFkZDIwICgpIHsKICAgICAgdGhpcy5yZXN1bHQgKz0gMjAKICAgICAgdGhpcy5lbWl0UmVzdWx0KCkKICAgIH0sCiAgICBhZGQ1MCAoKSB7CiAgICAgIHRoaXMucmVzdWx0ICs9IDUwCiAgICAgIHRoaXMuZW1pdFJlc3VsdCgpCiAgICB9LAogICAgYWRkMTAwICgpIHsKICAgICAgdGhpcy5yZXN1bHQgKz0gMTAwCiAgICAgIHRoaXMuZW1pdFJlc3VsdCgpCiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["ProductList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h6 ><b><u>SCG VENDING MACHINE BY PUNYAWEE POS</u></b></h6>\n    <strong>\n      <i>\n        (NOTE: Edit and Add new Products are created for admin but you can try them in this demo project)\n      </i>\n    </strong>\n    <br><br>\n    <h6 ><b>#USER</b></h6>\n    <p6><i>Insert coins to increase your balance</i>\n      <br>\n\n    </p6>\n\n\n    <table class=\"table is-striped is-bordered mt-2 is-fullwidth\">\n      <thead>\n      <tr>\n        <th>User</th>\n        <th>Coins</th>\n        <th>Balance</th>\n        <th>Item</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr>\n        <td>SCG-USER</td>\n        <td>\n          <button @click='add1'>+1</button>\n          <button @click='add5'>+5</button>\n          <button @click='add10'>+10</button>\n          <button @click='add20'>+20</button>\n          <button @click='add50'>+50</button>\n          <button @click='add100'>+100</button>\n        </td>\n        <td>{{ result }}</td>\n        <td>{{ userItem }}</td>\n      </tr>\n      </tbody>\n    </table>\n    <h6><b>#VENDING MACHINE <i><u>@LOCATION: {{deviceLocation}}</u></i> </b></h6>\n    <p6><i>Choose 'GET ITEM' to get your drink. Your balance will deduct automatically</i>\n      <br>\n    </p6>\n\n    <table class=\"table is-striped is-bordered mt-2 is-fullwidth\">\n      <thead>\n      <tr>\n        <th>Product Name</th>\n        <th>Price</th>\n        <th>Unit</th>\n        <th class=\"has-text-centered\">Actions</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"item in items\" :key=\"item.product_id\">\n        <td>{{ item.product_name }}</td>\n        <td>{{ item.product_price }}</td>\n        <td>{{ item.product_unit }}</td>\n        <td class=\"has-text-centered\">\n          <router-link\n              :to=\"{ name: 'Edit', params: { id: item.product_id } }\"\n              class=\"button is-info is-small\"\n          >EDIT DETAILS</router-link\n          >\n          <a\n              class=\"button is-danger is-small\"\n              @click=\"deleteProduct(item.product_id)\"\n          >GET ITEM</a\n          >\n        </td>\n      </tr>\n      </tbody>\n      <br>\n      <router-link :to=\"{ name: 'Create' }\" class=\"button is-success is-small\"\n      >ADD NEW PRODUCT</router-link\n      >\n    </table>\n\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"ProductList\",\n  data() {\n    return {\n      items: [],\n      result: 0,\n      userItem : [],\n      deviceLocation: 'Bangkok, Huaykwang, RAMA9, 10310',\n\n    };\n  },\n  props: ['value'],\n  created() {\n    this.getProducts();\n  },\n\n  methods: {\n    // Get All Products\n    async getProducts() {\n      try {\n        const response = await axios.get(\"http://localhost:5000/products\");\n        this.items = response.data;\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    // Delete Product after user pick up\n    async deleteProduct(id) {\n      try {\n        const temp = await axios.get(`http://localhost:5000/products/${id}`);\n        const tempPrice = temp.data.product_price;\n        const tempName = temp.data.product_name;\n        const tempUnit = temp.data.product_unit;\n\n        //ENOUGH BALANCE\n        if(this.result >= tempPrice){\n          //ITEM ONLY 1 LEFT\n          if(tempUnit==1){\n            this.result-=tempPrice;//DEDUCT BALANCE\n            await axios.delete(`http://localhost:5000/products/${id}`);//DELETE LAST ITEM\n            this.userItem.push(tempName);//USER GET ITEM\n            alert('DELETE ITEM')\n          }\n          //ITEM LEFT LEST THAN 10 BUT GREATER THAN 1\n          else if(tempUnit == 10) {\n            this.result -= tempPrice;//DEDUCT BALANCE\n            await axios.put(`http://localhost:5000/products/${id}/${tempUnit - 1}`,\n                {\n                  product_name: tempName,\n                  product_price: this.productPrice,\n                });//UPDATE NEW UNIT-1 TO ITEM\n            this.userItem.push(tempName)//USER GET ITEM\n            alert('ITEM NOW LESS THAN 10 UNITS')\n            await axios.post(`http://localhost:5000/products/email/${this.deviceLocation}`);//EMAIL ADMIN\n            alert('EMAIL WARNING SENT');\n          }\n          else{\n            this.result-=tempPrice;//DEDUCT BALANCE\n            await axios.put(`http://localhost:5000/products/${id}/${tempUnit-1}`,\n                {\n                  product_name: tempName,\n                  product_price: this.productPrice,\n                });//UPDATE NEW UNIT-1 TO ITEM\n            this.userItem.push(tempName)//USER GET ITEM\n            alert('USER GOT ITEM')\n          }\n        }\n        //NOT ENOUGH BALANCE\n        else{\n          alert(`You have ${this.result} coins, But the price is ${tempPrice}`)\n          alert('TRY INSERT COINS')\n        }\n        this.getProducts();\n      } catch (err) {\n        console.log(err);\n      }\n    },\n\n    emitResult () {\n      this.$emit('input', this.result)\n    },\n    add1 () {\n      this.result += 1\n      this.emitResult()\n    },\n    add5 () {\n      this.result += 5\n      this.emitResult()\n    },\n    add10 () {\n      this.result += 10\n      this.emitResult()\n    },\n    add20 () {\n      this.result += 20\n      this.emitResult()\n    },\n    add50 () {\n      this.result += 50\n      this.emitResult()\n    },\n    add100 () {\n      this.result += 100\n      this.emitResult()\n    },\n  },\n};\n</script>\n\n<style>\n</style>"]}]}